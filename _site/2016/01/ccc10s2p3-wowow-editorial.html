<html lang="en">

<head>
  <meta charset="UTF-8">
  <title>William Granados</title>
  <meta name="theme-color" content="#222222" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <script src="http://localhost:4000/js/jquery.min.js"></script>
  <script src="http://localhost:4000/js/bootstrap.min.js"></script>
  <script src="http://localhost:4000/js/header.js"></script>
  <script src="http://localhost:4000/js/toc.js"></script>
  <link href="http://localhost:4000/css/bootstrap.min.css" rel="stylesheet">
  <link href="http://localhost:4000/css/theme.css" rel="stylesheet">
  <link href="http://localhost:4000/css/syntax.css" rel="stylesheet">
  <link href="http://localhost:4000/css/font-awesome/css/font-awesome.min.css" rel="stylesheet">
</head>

<body>

  

  


 <script type="text/javascript">
  WebFontConfig = {
    google: {
      families: ['Ubuntu::latin']
    }
  };
  (function() {
    var wf = document.createElement('script');
    wf.src = ('https:' == document.location.protocol ? 'https' : 'http') +
      '://ajax.googleapis.com/ajax/libs/webfont/1/webfont.js';
    wf.type = 'text/javascript';
    wf.async = 'true';
    var s = document.getElementsByTagName('script')[0];
    s.parentNode.insertBefore(wf, s);
  })();
</script>

  <nav class="navbar navbar-inverse navbar-fixed-top">
    <div class="container">
      <div class="navbar-header">
        <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
        </button>
        <a class="navbar-brand" href="http://localhost:4000/">William Granados</a>
      </div>
      <div class="collapse navbar-collapse">
        <ul class="nav navbar-nav">
          <li><a href="http://localhost:4000/">/home</a></li>
          <li><a href="http://localhost:4000/archive.html">/archive</a></li>
          <li><a href="http://localhost:4000/projects.html">/projects</a></li>
          <li><a href="http://localhost:4000/tags.html">/tags</a></li>
          <li><a href="http://localhost:4000/about.html">/about</a></li>
        </ul>
      </div>
    </div>
  </nav>


<div class="wrapper">
  <div class="content">
    <div class="container container-center">
      <div class="row">
        <div class="col-md-8">
          <div class="article">
            <div class="well">
              <h1><a href="http://localhost:4000/2016/01/ccc10s2p3-wowow-editorial">CCC10S2P3 - Wowow (Editorial)</a></h1>
              <div class="post-meta">
                <div class="post-time">
                  <i class="fa fa-calendar"></i>
                  <time>14 Jan 2016</time>
                </div>
                <ul>
                  
                    <li><a href="http://localhost:4000/tag/Canadian Computing Competition">Canadian Computing Competition</a></li>
                  
                    <li><a href="http://localhost:4000/tag/CCC">CCC</a></li>
                  
                    <li><a href="http://localhost:4000/tag/Data Structures">Data Structures</a></li>
                  
                </ul>
              </div>
              <div class="post-content">
                <div id="toc" class="toc"></div>
                <script src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>

<p>This problem asks us to handle a ranking system where we have to update a person’s score and query for the Kth ranked person.</p>

<p>Although this problem was intended to be solved with an offline solution that incorporates a binary indexed tree, today I will go over the solution which uses an order statistic tree. An order statistic tree is special tree that has the same characteristics of a binary search tree, but with the added functionality of being able to query for the Kth ranked element in the tree. The main idea for handling ranked based queries on an ordered statistic tree is to at every node to keep the number of children in its left and right sub-tree. Then when we search through an element every time we go left in the sub-tree we add the value of the current node’s right sub-tree – since the number of elements in the right sub-tree are the number of elements that are larger than the queried element.</p>

<p>In addition to this we also are required to keep the tree balanced otherwise the tree degenerates into a linked list where the time per query is <script type="math/tex">O(N)</script> resulting in an overall complexity of <script type="math/tex">O(QN)</script> instead of <script type="math/tex">O(Qlog{}N)</script>. Luckily the built in Ordered Statistics Tree uses a red black tree for its implementation.</p>

<p>Time Complexity: <script type="math/tex">O(Q\log{}N)</script></p>

<figure class="highlight"><pre><code class="language-c--" data-lang="c++"><span class="cp">#include&lt;bits/stdc++.h&gt;
#include &lt;ext/pb_ds/assoc_container.hpp&gt;
#include &lt;ext/pb_ds/tree_policy.hpp&gt;
#define pb push_back
#define mp make_pair
#define db 0
#define all(x)(x).begin(),(x).end()
#define x first
#define y second
</span><span class="k">using</span> <span class="k">namespace</span> <span class="n">std</span><span class="p">;</span>
<span class="k">using</span> <span class="k">namespace</span> <span class="n">__gnu_pbds</span><span class="p">;</span>

<span class="k">typedef</span> <span class="n">tree</span><span class="o">&lt;</span>
  <span class="kt">int</span><span class="p">,</span>
  <span class="n">null_type</span><span class="p">,</span>
  <span class="n">greater</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;</span><span class="p">,</span>
  <span class="n">rb_tree_tag</span><span class="p">,</span>
  <span class="n">tree_order_statistics_node_update</span><span class="o">&gt;</span>
<span class="n">set_t</span><span class="p">;</span>

<span class="kt">int</span> <span class="n">N</span><span class="p">,</span><span class="n">X</span><span class="p">,</span><span class="n">R</span><span class="p">,</span><span class="n">K</span><span class="p">,</span><span class="n">n</span><span class="p">;</span>
<span class="kt">char</span> <span class="n">cmd</span><span class="p">;</span>
<span class="n">map</span><span class="o">&lt;</span><span class="kt">int</span><span class="p">,</span><span class="kt">int</span><span class="o">&gt;</span><span class="n">user</span><span class="p">,</span><span class="n">score</span><span class="p">;</span>
<span class="n">set_t</span> <span class="n">s</span><span class="p">;</span>

<span class="kt">int</span> <span class="n">main</span><span class="p">(){</span>
    <span class="n">scanf</span><span class="p">(</span><span class="s">"%d"</span><span class="p">,</span><span class="o">&amp;</span><span class="n">N</span><span class="p">);</span>
    <span class="k">for</span><span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span><span class="n">i</span> <span class="o">&lt;</span> <span class="n">N</span><span class="p">;</span><span class="o">++</span><span class="n">i</span><span class="p">){</span>
      <span class="n">scanf</span><span class="p">(</span><span class="s">" %c"</span><span class="p">,</span><span class="o">&amp;</span><span class="n">cmd</span><span class="p">);</span>
      <span class="k">if</span><span class="p">(</span><span class="n">cmd</span> <span class="o">==</span> <span class="sc">'N'</span><span class="p">){</span>
        <span class="n">scan</span><span class="p">(</span><span class="n">X</span><span class="p">);</span>
        <span class="n">scan</span><span class="p">(</span><span class="n">R</span><span class="p">);</span>
        <span class="n">user</span><span class="p">[</span><span class="n">X</span><span class="p">]</span> <span class="o">=</span> <span class="n">R</span><span class="p">;</span>
        <span class="n">score</span><span class="p">[</span><span class="n">R</span><span class="p">]</span> <span class="o">=</span> <span class="n">X</span><span class="p">;</span>
        <span class="n">s</span><span class="p">.</span><span class="n">insert</span><span class="p">(</span><span class="n">R</span><span class="p">);</span>
      <span class="p">}</span>
      <span class="k">else</span> <span class="k">if</span><span class="p">(</span><span class="n">cmd</span> <span class="o">==</span> <span class="sc">'M'</span><span class="p">){</span>
        <span class="n">scanf</span><span class="p">(</span><span class="s">"%d%d"</span><span class="p">,</span><span class="n">X</span><span class="p">,</span><span class="n">R</span><span class="p">);</span>
        <span class="n">s</span><span class="p">.</span><span class="n">erase</span><span class="p">(</span><span class="n">user</span><span class="p">[</span><span class="n">X</span><span class="p">]);</span>
        <span class="n">score</span><span class="p">.</span><span class="n">erase</span><span class="p">(</span><span class="n">user</span><span class="p">[</span><span class="n">X</span><span class="p">]);</span>
        <span class="n">user</span><span class="p">[</span><span class="n">X</span><span class="p">]</span> <span class="o">=</span> <span class="n">R</span><span class="p">;</span>
        <span class="n">score</span><span class="p">[</span><span class="n">R</span><span class="p">]</span> <span class="o">=</span> <span class="n">X</span><span class="p">;</span>
        <span class="n">s</span><span class="p">.</span><span class="n">insert</span><span class="p">(</span><span class="n">R</span><span class="p">);</span>
      <span class="p">}</span><span class="k">else</span><span class="p">{</span>
        <span class="n">scan</span><span class="p">(</span><span class="n">K</span><span class="p">);</span>
        <span class="n">printf</span><span class="p">(</span><span class="s">"%d</span><span class="se">\n</span><span class="s">"</span><span class="p">,</span><span class="n">score</span><span class="p">[</span><span class="o">*</span><span class="n">s</span><span class="p">.</span><span class="n">find_by_order</span><span class="p">(</span><span class="n">K</span><span class="o">-</span><span class="mi">1</span><span class="p">)]);</span>
      <span class="p">}</span>
    <span class="p">}</span>
    <span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
<span class="p">}</span></code></pre></figure>


                

              </div>
              
              <div id="disqus_thread">
                <noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
                <a href="http://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>
              </div>
              
            </div>
          </div>
        </div>
        <div class="col-md-4 hidden-xs">
          <div class="sidebar ">
  <h2>Recent Posts</h2>
  <ul>
    
    <li><a href="/2016/04/fire-emblem-apostheosis-team">Fire Emblem Awakening - Apostheosis</a></li>
    
    <li><a href="/2016/01/ccc10s2p3-wowow-editorial">CCC10S2P3 - Wowow (Editorial)</a></li>
    
    <li><a href="/2016/01/ccc10s2p1-barking-dogs-editorial">CCC10S2P1 - Barking Dogs! (Editorial)</a></li>
    
    <li><a href="/2016/01/ccc10s4-animal-farm-editorial">CCC10S4 - Animal Farm (Editorial)</a></li>
    
    <li><a href="/2016/01/ccc10s3-firehose-editorial">CCC10S3 - Firehose (Editorial)</a></li>
    
  </ul>
</div>

<div class="sidebar">
  <h2>Tags</h2>
  <ul>
    
      <li><a href="/tag/Canadian Computing Competition">Canadian Computing Competition</a></li>
    
      <li><a href="/tag/CCC">CCC</a></li>
    
      <li><a href="/tag/No Brainers For Speed">No Brainers For Speed</a></li>
    
      <li><a href="/tag/Binary Search">Binary Search</a></li>
    
      <li><a href="/tag/Minimum Spanning Tree">Minimum Spanning Tree</a></li>
    
      <li><a href="/tag/Implementation">Implementation</a></li>
    
      <li><a href="/tag/Data Structures">Data Structures</a></li>
    
  </ul>
</div>

        </div>
      </div>
    </div>
    
<!-- Add Disqus comments. -->
<div id="disqus_thread"></div>
<script type="text/javascript">
  /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
  var disqus_shortname = 'wgma'; // required: replace example with your forum shortname
  var disqus_identifier = "/2016/01/ccc10s2p3-wowow-editorial";

  /* * * DON'T EDIT BELOW THIS LINE * * */
  (function() {
    var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
    dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
    (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
  })();
</script>
<noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
<a href="http://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>


  </div>
      <footer class="footer-distributed">
      <div class="container">
        <div class="footer">
          <p>William Granados &copy; 2016</p>
          <h6>Follow me</h6>

<ul class="social-media">

  
    <li>
      <a title="wgma00 on Github" href="https://github.com/wgma00" target="_blank"><i class="fa fa-github fa-2x"></i></a>
    </li>
  

  
    <li>
      <a title="5972611/wgma00 on StackOverflow" href="http://stackoverflow.com/users/5972611/wgma00" target="_blank"><i class="fa fa-stack-overflow fa-2x"></i></a>
    </li>
  

  
    <li>
      <a title="wgma00 on LinkedIn" href="https://www.linkedin.com/in/williamgranados" target="_blank"><i class="fa fa-linkedin fa-2x"></i></a>
    </li>
  

  

  

  
    <li>
      <a title="feed.xml RSS" href="/feed.xml" target="_blank"><i class="fa fa-rss fa-2x"></i></a>
    </li>
  

</ul>

        </div>
      </div>
    </footer>
  </body>
</html>

</div>
